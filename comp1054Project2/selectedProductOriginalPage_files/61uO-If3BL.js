(function(q){var t=window.AmazonUIPageJS||window.P,y=t._namespace||t.attributeErrors,a=y?y("DetailPageAttachAssets",""):t;a.guardFatal?a.guardFatal(q)(a,window):a.execute(function(){q(a,window)})})(function(q,t,y){"use strict";q.register("attach-variant-registration",function(){function a(a){if(b.hasOwnProperty(a))throw"Variant flag already registered";b[a]=!0}var b={};a("ATTACH_ENDPOINT_ADD_TO_CART_DEPRECATION_398029:T1");a("WTY_ATTACH_CART_API_IA_409696:T1");a("WTY_ATTACH_SI_CHECK_DISABLED_411112:T1");
a("WTY_ENABLE_INSTALLMENTS_DSS_LAUNCH_421616:T1");return{registerVariantFlag:a,getVariantFlag:function(a){return b.hasOwnProperty(a)}}});"use strict";q.when("A","attach-weblabs","attach-logging","attach.amazonapi.cart.add-items").register("attach-baselink",function(a,b,d,l){var c=null;q.when("BaseLinkFormHelper").execute(function(a){c=a});var m=function(c,g,d){if(!c||!c.baseItemCartId)return p("baseItemCartId is undefined. Abandoning ATC since Base item and Warranty association can not be done."),
d();a.ajax("/gp/product/amazon-protect/base-link/services/warranty-service.html",{method:"post",params:c,timeout:1E3,success:function(c){c&&c.status&&"OK"===c.status&&(g(),!a.capabilities.isAmazonApp&&b.isMobileWebMBSEnabled()&&q.when("nav.setCartCount").execute(function(a){a(c.numActiveItemsInCart)}))},error:function(){d()}})},p=function(a){t.ueLogError&&t.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,b){return c?
c.addBaseLinkFields(a,b):null},addLinkedWarranty:function(a,c,h){b.isCartApiItemAssociationEnabled()?a&&a.baseItemAsin?(a={asin:a.warrantyAsin,offerListingId:a.offeringId,quantity:parseInt(a.quantity),additionalParameters:{itemAssociation:{associatedItemId:a.baseItemAsin,deleteConstraint:{mutuallyInclusive:!1},quantityConstraint:{invarianceFactor:1,quantityEditable:!0},programType:"AmazonProtect",renderType:"renderAll"}}},l.addItems([a],d.REF_TAGS.WARRANTY_ADD_TO_CART).then(c).catch(h)):(p("baseItemAsin is undefined. Abandoning ATC since Base item and Warranty association can not be done."),
h()):m(a,c,h)},obtainBaseItemCartId:function(b){a.ajax("/gp/product/amazon-protect/base-link/services/last-added-cart-item-id.html",{method:"post",timeout:1E3,success:function(a){a&&a.status&&a.lastAddedItemCartId?b(a.lastAddedItemCartId):p("Error while doing a call to last-added-cart-item-id.html. Status: "+a.status)},error:function(a,b,c){p("Error while doing a call to last-added-cart-item-id.html. Status: "+b+" . Error: "+c)}})},mSilogError:p}});"use strict";q.when("A").register("attach-external-atc-interceptor",
function(a){var b=a.$,d=[],l=[],c=!1,m=!1,p=function(){m=!0},e=function(a){var c=l.indexOf(a);-1<c&&(a=b("#attach_add_accessory_alert_"+c),c=b("#attach_add_accessory_button_"+c),a&&c&&(a.removeClass("aok-hidden"),c.addClass("aok-hidden")))};return{updateAttachModule:function(a){p&&(c?e(a):d.push(a))},loadAttachModule:function(a){if(m)for(c=!0,l=a;0<d.length;)a=d.shift(),e(a)},unloadAttachModule:function(){c=!1;l=[]},enableModule:p}});"use strict";q.when("A").register("attach-preinitiate-checkout",
function(a){return{getCartInitiateId:function(){return(new Date).getTime()},preinitiateCheckout:function(b){var d=a.$("#attach-desktop-sideSheet");var l=a.$("#attach_accessory_sheet");d=d.length?d:l;d.find("iframe#checkoutPrefetch").remove();b="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+b;l=document.createElement("iframe");l.setAttribute("src",b);l.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");l.setAttribute("name","checkoutPrefetch");l.setAttribute("id",
"checkoutPrefetch");d.append(l)}}});"use strict";q.when("A","attach-common","attach-variant-registration").register("attach-weblabs",function(a,b,d){function l(b){var c=a.$(b).val();b=[];if(c&&0<c.length){c=c.slice(1,-1).split(",");for(var d=0;d<c.length;d++){var m=c[d].trim();0<m.length&&b.push(m)}}return b}var c={},m=c.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",
SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",WTY_TWISTER_CONTAINER:"#warranty-twister-container",WTY_LD_SUPPORT:"#warranty-ld-launch",AAPI_AJAX_ENDPOINT:"#attach-aapi-ajax-endpoint",MOBILE_WEB_MBS_EXPERIMENT_WEBLAB:"#attach-accessory-mobile-web-mbs"},p=c.Marketplaces={IN:"A21TJRUUN4KGV"};c.isWarrantyPaneSuppressed=function(){return a.$(m.ATTACH_MARKETPLACE_ID).val()===
p.IN&&(!c.servicesInterstitialDeprecated()||b.hasAccessories())};c.isShowAccessoryCouponsDssEnabled=function(){return b.elementExists(m.SHOW_ACCESSORY_COUPONS_DSS)};c.isShowAccessoryCouponsMbsEnabled=function(){return b.elementExists(m.SHOW_ACCESSORY_COUPONS_MBS)};c.isCoreFreeShippingMessageEnabled=function(){return b.elementExists(m.CORE_FREE_SHIPPING_MESSAGE)};c.isAttachDebugParametersEnabled=function(){return 0<a.$(m.DEBUG_IS_DEBUG).length||0<a.$(m.DEBUG_QUERY_STRING).length};c.isInstallmentsDssIntegrationEnabled=
function(){return d.getVariantFlag("WTY_ENABLE_INSTALLMENTS_DSS_LAUNCH_421616:T1")};c.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<a.$(m.WTY_TWISTER_CONTAINER).length};c.isWarrantyLDSupportEnabled=function(){return b.elementExists(m.WTY_LD_SUPPORT)};c.isAmazonApiAjaxEnabled=function(){return b.elementExists(m.AAPI_AJAX_ENDPOINT)};c.servicesInterstitialDeprecated=function(){return b.elementExists("#attachSIDeprecated")};c.isCartApiItemAssociationEnabled=function(){return d.getVariantFlag("WTY_ATTACH_CART_API_IA_409696:T1")};
c.isWarrantyServicesInterstitialCheckDisabled=function(){return d.getVariantFlag("WTY_ATTACH_SI_CHECK_DISABLED_411112:T1")};c.isAttachAddToCartEndpointDeprecated=function(){return d.getVariantFlag("ATTACH_ENDPOINT_ADD_TO_CART_DEPRECATION_398029:T1")};c.isAttachGetCartDescriptionEndpointDeprecated=function(){return d.getVariantFlag("ATTACH_ENDPOINT_GET_CART_DESCRIPTION_DEPRECATION_398030:T1")};c.isMobileWebMBSEnabled=function(){return b.elementExists(m.MOBILE_WEB_MBS_EXPERIMENT_WEBLAB)};c.getAllWeblabsToTriggerClientSide=
function(){return l(m.WEBLABS_TO_TRIGGER_ON_ADD_TO_CART).map(function(a){return a.split(":")})};c.triggerClientSideWeblabs=function(){var a=c.getAllWeblabsToTriggerClientSide();if(0<a.length)for(var b=0;b<a.length;b++){var d=a[b];t.ue&&ue.count&&ue.count("Attach.ClientSideWeblab."+d[0]+":"+d[1],1);t.ue&&ue.trigger&&ue.trigger(d[0],d[1])}};return c});"use strict";q.when("A").register("attach-logging",function(a){var b={},d,l,c;b.NEXUS={PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",
ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"10",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"14",ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",
PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};b.FEATURES={DSS:"dss",MBS:"mbs",MBS_APP:"mbs_app",MBS_WEB:"mbs_web"};b.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",
ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",
MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",DSS_BASE_LD_MISSING_TIMER:"attachDesktopBaseLightningDealMissingTimer",MBS_BASE_LD_MISSING_TIMER:"attachMobileBaseLightningDealMissingTimer",
DSS_LD_MISSING_ATTACH:"attachDesktopLightningDealMissingAttachContainer",MBS_APP_LD_MISSING_ATTACH:"attachMobileAppLightningDealMissingAttachContainer",MBS_WEB_LD_MISSING_ATTACH:"attachMobileWebLightningDealMissingAttachContainer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError",
ATTACH_MBS_ATC_STAY_AJAX_SUCCESS:"attachMbsAtcStayAjaxSuccess",ATTACH_MBS_ATC_STAY_AJAX_FAILURE:"attachMbsAtcStayAjaxFailure",ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE:"attachMbsAtcStayAjaxIncomplete"};b.ENDPOINTS={REF_TAG_IN:"/hctp/log/refMarker?ref_\x3d"};b.METRICS={DPX_MOBILE_APP_ATC:"DetailPage_MobileApp_AddToCart",DPX_MOBILE_WEB_ATC:"DetailPage_MobileWeb_AddToCart"};b.initialize=function(a,c){d=a;l=c;b.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_"}};
b.setPayloadBuilder=function(a){c=function(){var c=a();c.feature=d;c.obfuscatedMarketplaceId=l||t.ue_mid;c.producerId=b.NEXUS.PRODUCER_ID;c.requestId=b.getRandomHexString();return c}};b.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.log=function(c,d){t.ue&&t.ue.event&&(c.customerId=a.$("#attach-customerId").val()||null,t.ue.event(c,b.NEXUS.PRODUCER_ID,d,{ssd:!1}))};b.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+
(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+
b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};b.logAccessoryAddToCart=function(a){var d=b.NEXUS.ADD_ACCESSORY_PREFIX+b.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,e=c();e.type=b.NEXUS.ACCESSORY_TYPE.ACCESSORY;e.displayPosition=parseInt(a.index)+
1;e.accessoryAsin=a.asin;e.accessoryAsinPrice=a.priceFormatted;e.accessoryItemCurrencySymbol=a.currencySymbol;e.accessoryItemPriceDecimal=a.priceDecimal;e.couponType=a.couponType;e.couponDecimal=a.couponDecimal;e.dealType=a.dealType;e.dealPercentSavings=a.dealPercentSavings;e.dealDollarAmount=a.dealDollarAmount;e.categoryDisplayPosition=parseInt(a.categoryIndex)+1;e.categoryTitle=a.categoryTitle;e.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;b.log(e,d)};b.logAccessoryImpressions=
function(a){var d=b.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+b.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,e=c();e.accessories=[];for(var g=0;g<a.length;g++){var h=a[g];e.accessories.push({displayPosition:parseInt(h.index)+1,asin:h.asin,price:h.priceFormatted,currencySymbol:h.currencySymbol,priceDecimal:h.priceDecimal,couponType:h.couponType,couponDecimal:h.couponDecimal,dealType:h.dealType,dealPercentSavings:h.dealPercentSavings,dealDollarAmount:h.dealDollarAmount,categoryDisplayPosition:parseInt(h.categoryIndex)+
1,categoryTitle:h.categoryTitle,displayPositionWithinCategory:parseInt(h.asinIndexWithinCategory)+1})}b.log(e,d)};b.logWarrantyAddToCart=function(a,d){var e=b.NEXUS.ADD_WARRANTY_PREFIX+b.NEXUS.ADD_WARRANTY_SCHEMA_VERSION;d&&(e=b.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+b.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION);var g=c();g.asin=a.asin;g.price=a.priceFormatted;g.warrantyCurrencySymbol=a.currencySymbol;g.warrantyPriceDecimal=a.priceDecimal;b.log(g,e);d||b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_ADD_TO_CART,
a.asin)};b.logWarrantyImpression=function(a){var d=b.NEXUS.WARRANTY_IMPRESSION_PREFIX+b.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,e=c();e.asin=a.asin;e.price=a.priceFormatted;e.warrantyCurrencySymbol=a.currencySymbol;e.warrantyPriceDecimal=a.priceDecimal;b.log(e,d);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};b.logWarrantyRefTag=function(a,d){var e=c().baseAsin;b.logRefTag(a+e+"_"+d)};b.logSecondarySheetRefTag=function(a){var d=c().baseAsin;b.logRefTag(a+"_"+d)};b.logRefTag=function(c){"A21TJRUUN4KGV"===
l&&a.get(b.ENDPOINTS.REF_TAG_IN+c)};b.logMobileBaseAtc=function(c){b.logCount(b.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);c&&c.data&&"add-to-cart"===c.data.buttonID&&b.logCount(a.capabilities.isAmazonApp?b.METRICS.DPX_MOBILE_APP_ATC:b.METRICS.DPX_MOBILE_WEB_ATC)};b.logMapleError=function(){t.ue&&t.ue.count&&t.ue.count("MAPLE::DSS::Error",(t.ue.count("MAPLE::DSS::Error")||0)+1)};b.logCount=function(a,b){t.ue&&t.ue.count&&(b=b||1,t.ue.count(a,(t.ue.count(a)||0)+b))};b.logError=function(a,b,c){t.ueLogError&&
t.ueLogError(a,{logLevel:b||"ERROR",attribution:c||"DetailPageAttachAssets"})};b.logDSSWarningMessage=function(a){var d=b.NEXUS.DSS_WARNING_MESSAGE_PREFIX+b.NEXUS.DSS_WARNING_MESSAGE_VERSION,e=c();b.log({quantity:e.quantity.toString(),baseAsin:e.baseAsin,warningMessage:a},d)};b.logPromotionClaimed=function(a){var d=b.NEXUS.PROMOTION_CLAIMED_PREFIX+b.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,e=c();e.asin=a.asin;e.accessoryCurrencySymbol=a.currencySymbol;e.accessoryPriceDecimal=a.priceDecimal;e.displayPosition=
a.index+1;null!==a.couponType&&(e.promoDecimal=a.couponDecimal,e.promoDecimalType=a.couponType,e.promoType="coupon");b.log(e,d)};b.isFunction=function(a){return"function"===typeof a};b.beginLatencyCapture=function(a){b.isFunction(t.uet)&&t.uet("bb",a,{wb:1})};b.endLatencyCapture=function(a){b.isFunction(t.uex)&&t.uex("ld",a,{wb:1})};return b});"use strict";q.when("A","attach-logging").register("attach-maple",function(a,b){var d={},l;d.initialize=function(){l=!1};d.loadBannerHTML=function(){var c=
a.$.Deferred(),d={};l&&(d.cart=null);a.post("/gp/cobrandcard/dss-maple-banner.html",{params:d,success:function(a){c.resolve(a)},error:function(){b.logMapleError();c.resolve(null)}});return c.promise()};d.suppressMathBox=function(){l=!0};d.updateMathBox=function(a){"undefined"!==typeof mapleMathBox&&null!==mapleMathBox&&mapleMathBox.updateMapleMath({totalCost:a})};return d});"use strict";q.when("A","3p-promise","attach-variant-registration","attach-logging").register("attach-common",function(a,b,d,
l){function c(b){var c=m(b,h.UNIQ_ITEM_ASSOC_NAME),d=m(b,h.ITEM_ASSOC_TYPE_NAME),f=1,u=!1;null!==d&&(g.itemAssocTypeValue=b.find(h.INPUT_NAME+d+h.CLOSED_BRACKET).val(),g.itemAssocTypeValue===h.ATTACH_ITEM_ASSOC_TYPE_VALUE&&(u=!0));null!==c?u?(d=m(b,h.ITEM_ASSOC_NAME),u=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),b.find(h.INPUT_NAME+c+h.CLOSED_BRACKET).val(u),b.find(h.INPUT_NAME+d+h.CLOSED_BRACKET).val(u),g.uniqueId=u):g.uniqueId=b.find(h.INPUT_NAME+c+h.CLOSED_BRACKET).val():(g.uniqueId=
a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),f=e(b,f),p(b,h.ITEM_ASSOC_NAME,g.uniqueId,f),f++,f=e(b,f),p(b,h.UNIQ_ITEM_ASSOC_NAME,g.uniqueId,f),f++,f=e(b,f),p(b,h.ITEM_ASSOC_TYPE_NAME,g.itemAssocTypeValue,f),f++);f=e(b,f);p(b,h.ITEM_ASSOC_PROPERTIES_NAME,h.ITEM_ASSOC_PROPERTIES_VALUE,f)}function m(a,b){a=a.find(h.INPUT_VALUE+b+h.CLOSED_BRACKET);if(!a.length)return null;a=a[0].name.split(".");return 2<a.length?h.CUSTOM_VALUE_KEY+a[1]+"."+a[2]:null}function p(a,b,c,d){a.append('\x3cinput type\x3d"hidden" name\x3d"custom-name.1.'+
d+'" value\x3d"'+b+'"/\x3e');a.append('\x3cinput type\x3d"hidden" name\x3d"custom-value.1.'+d+'" value\x3d"'+c+'"/\x3e')}function e(a,b){for(;0<a.find('input[name\x3d"custom-name.1.'+b+'"]').length||0<a.find('input[name\x3d"custom-value.1.'+b+'"]').length;)b++;return b}var g={},h=g.ItemAssociationConstants={ITEM_ASSOC_NAME:"itemAssoc",UNIQ_ITEM_ASSOC_NAME:"UNIQ-itemAssoc",ITEM_ASSOC_TYPE_NAME:"itemAssocType",ATTACH_ITEM_ASSOC_TYPE_VALUE:"Attach",ITEM_ASSOC_RENDER_TYPE_NAME:"itemAssocRenderType",ITEM_ASSOC_RENDER_TYPE_VALUE:"renderAll",
ITEM_ASSOC_PROPERTIES_NAME:"itemAssocProperties",ITEM_ASSOC_PROPERTIES_VALUE:"{\x26#34;QuantityEditable\x26#34;:\x26#34;1\x26#34;,\x26#34;QuantityInvarianceFactor\x26#34;:\x26#34;1\x26#34;}",CUSTOM_VALUE_KEY:"custom-value.",INPUT_VALUE:"input[value\x3d'",INPUT_NAME:"input[name\x3d'",CLOSED_BRACKET:"']"},v=g.Marketplaces={IN:"A21TJRUUN4KGV"};g.uniqueId=null;g.itemAssocTypeValue="Attach";g.selectedBaseLightningDeal=!1;g.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4,REBIND_ATC:5};
var f=g.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled",ATC_FORM:"#addToCart",INSTALLMENTS_FORM:"#mobile-installments"};g.buyButton=a.$(f.ADD_TO_CART_BUTTON);g.reject=function(b,c){return g.rejectPromise(a.$.Deferred(),b,c)};g.rejectPromise=function(b,c,d){if(d&&d.count&&t.ue&&t.ue.count)if("string"===typeof d.count)t.ue.count(d.count,1);else if(a.$.isArray(d.count))for(var f=0;f<
d.count.length;f++)t.ue.count(d.count[f],1);d&&d.information&&l.logError("string"===typeof d.information?{message:d.information}:d.information,d.level,d.attribution);return b.reject(c,d)};g.pipeJSON=function(a){try{return JSON.parse(a)}catch(D){return g.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};g.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};g.elementExists=function(b){return b?b instanceof a.$?0!==b.length:0!==a.$(b).length:!1};
g.moduleExists=function(b){return(b=a.$("#"+b+"_feature_div").html())?0<b.trim().length:!1};g.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};g.hasWarranty=function(){return g.elementExists("#attachSIDeprecated")&&g.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};g.hasMonthlyWarranty=function(){return g.elementExists("#attach-monthly-warranty")};g.isMultiQuantityDeal=function(){return 0<a.$("#dealOrderQuantityDropdown").length};
g.hasAccessories=function(){return g.elementExists("#attach-asin-list")};g.isDiscriminatedOffersEnabled=function(){return g.elementExists(f.DISCRIMINATED_OFFERS_ENABLED)?"true"===a.$(f.DISCRIMINATED_OFFERS_ENABLED).val():a.$(f.ATTACH_MARKETPLACE_ID).val()===v.IN};g.submitATCForm=function(){var b=g.getAtcForm();g.isDiscriminatedOffersEnabled()&&c(b);l.logCount(l.CSM_METRICS.ATTACH_BASE_ATC_CLICK);b=b.serializeArray();var d=g.buyButton.attr("name"),f=g.buyButton.val();b.push({name:d,value:f});b=a.$.param(b);
b=a.$.ajax({type:"POST",url:"/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",data:b,headers:{Accept:"text/html"}});b.fail(function(a){l.logCount(l.CSM_METRICS.ATTACH_BASE_ATC_FAILURE);l.logError({message:"Base product ATC call failed: "+a.status})});a.trigger("attach:add-base-to-cart",b)};g.getAtcForm=function(){return g.buyButton.closest("form")};g.isMTAEnabledForAttach=function(){return!1};g.getDeferredFromPromise=function(b){var c=a.$.Deferred();b.then(function(a){c.resolve(a)}).catch(function(a){c.reject(a)});
return c.promise()};g.getPromiseFromDeferred=function(a){return new b(function(b,c){a.then(b).fail(c)})};return g});"use strict";q.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration","attach.utilities.focus-management").register("attach-desktop-warranty-pane",function(a,b,d,l,c,m,p){var e={name:"warranty"},g=e.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",
BASE_ASIN:'input[name\x3d"items[0.base][asin]"], #ASIN',MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATC_QUANTITY:"#quantity",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",
PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld"},h;e.getWarrantyLoggingPayload=function(){var d=a.$(g.ASIN).val(),f=a.$(g.PRICE_FORMATTED),e=a.$(g.PRICE_AMOUNT);return!c.servicesInterstitialDeprecated()&&b.elementExists(e)?{asin:d,priceFormatted:f.text().trim(),priceDecimal:parseFloat(e.val())||null,currencySymbol:a.$(g.BASE_CURRENCY_SYMBOL).val()||
null}:{asin:d,priceFormatted:f.text().trim(),priceDecimal:null,currencySymbol:null}};e.appendWarrantyToATCForm=function(d,f){if(a.$(g.BASE_ASIN).val()&&d&&f){var e=b.getAtcForm();e.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var h=1;c.isWarrantyTwisterPlusDesktopEnabled()&&(h+=1);h=e.find("input[name^\x3d'offeringID']").length+h;var v=a.$(g.ATC_QUANTITY).val()||1,m="quantity."+h,p="asin."+h;e.find('input[name\x3d"'+
m+'"]').remove();e.find('input[name\x3d"'+p+'"]').remove();e.append('\x3cinput type\x3d"hidden" id\x3d"'+m+'" name\x3d"'+m+'" value\x3d"'+v+'" class\x3d"attach-warranty-input" /\x3e');e.append('\x3cinput type\x3d"hidden" id\x3d"'+p+'" name\x3d"'+p+'" value\x3d"'+d+'" class\x3d"attach-warranty-input" /\x3e');e.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+h+'" name\x3d"offeringID.'+h+'" value\x3d"'+f+'" class\x3d"attach-warranty-input"/\x3e');e.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][quantity]" value\x3d"'+
v+'" class\x3d"attach-warranty-input" /\x3e');e.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][asin]" value\x3d"'+d+'" class\x3d"attach-warranty-input" /\x3e');e.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][offerListingId]" value\x3d"'+f+'" class\x3d"attach-warranty-input" /\x3e');d=e.find('input[name\x3d"itemCount"]');0===d.length?e.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+h+'"\x3e'):d[0].value=h;a.$("#atch__bl").length&&l.createBaseLinkFormFields(h+
1,e)}};e.clearWarrantyFromATCForm=function(){b.getAtcForm().find(g.ATC_WARRANTY).remove()};e.load=function(d){if(c.servicesInterstitialDeprecated()){if(b.elementExists(g.PANE))a.$(g.PANE).removeClass("aok-hidden");else return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(c.isWarrantyLDSupportEnabled()&&b.selectedBaseLightningDeal)if(b.elementExists(g.PANE_LD))a.$(g.PANE+", "+g.PANE_LD).toggleClass("aok-hidden");else return b.reject(b.FailureModes.UNBIND_ATC);
b.elementExists(g.PANE_EXPERIMENT_DISPLAY)&&a.$(g.PANE_EXPERIMENT_DISPLAY).remove()}else{if(b.elementExists(g.JSON_DATA)){var f=b.unescapeJson(a.$(g.JSON_DATA).val());f=JSON.parse(f)}return f?e.renderClientSide(d,f):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})}};e.renderClientSide=function(b,c){var d="",f=c.baseASIN,e="dp_atch_dss_w_lm_"+f+"_"+c.asin,g="dp_atch_dss_w_r_"+f+"_"+c.asin;f="dp_atch_dss_w_lm_"+f+"_"+c.asin;var h=a.$("#stringTranslation-si-warranty-title").val(),
v=a.$("#stringTranslation-si-accident-protection").val(),l=a.$("#stringTranslation-si-from").val(),k=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),m=a.$("#stringTranslation-item-added-to-cart").val(),n=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),w=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),E=a.$("#stringTranslation-si-add-coverage").val(),p=a.$("#stringTranslation-si-no-thanks").val(),q=a.$("#stringTranslation-services-bundle-detail-link").val();
d+='   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+c.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+h+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n';
null!==c.thumbImage&&(d+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+c.thumbImage+'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');d+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+e+'"\x3e\n                        \x3cstrong\x3e'+(null!==c.displayTitle?c.displayTitle:v.replace("${brandName}",c.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+l+" "+c.merchantName+"\x3c/span\x3e\n";Number(c.averageRating)&&Number(c.numReviews)&&Number(c.numFullStars)&&"boolean"===typeof c.hasHalfStar&&(e=k.replace("${averageRating}",c.averageRating),d+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+
c.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+c.numFullStars+(c.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+e+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+c.asin+"/ref\x3d"+g+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+c.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");
null!==c.buyingPriceAmount&&(d+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+c.buyingPriceAmount+'"\x3e\n');d+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+c.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(g=0;g<c.bulletPoints.length;g++)d+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+c.bulletPoints[g].text+"\x3c/span\x3e\x3c/li\x3e\n";d+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
m+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
n+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+w+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
c.asin+'" data-offering-id\x3d"'+c.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+E+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
p+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+f+'"\x3e\n                '+q+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";b.$container.append(d)};e.onAttachAddBaseToCart=function(a){a.always(e.clearWarrantyFromATCForm)};e.setup=function(h){e.sheet=h;a.$(g.PANE).hide();var f=a.$(g.PANE_IMAGE).attr("data-image-url");a.$(g.PANE_IMAGE).attr("src",f);a.$(g.PANE_ADD_BUTTON).click(function(){var f=a.$(this).find("button");c.servicesInterstitialDeprecated()&&(f=a.$(this).find("[data-asin]"));var g=f.attr("data-asin");
f=f.attr("data-offering-id");e.appendWarrantyToATCForm(g,f);d.logWarrantyAddToCart(e.getWarrantyLoggingPayload());c.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.submitATCForm();h.next()});a.$(g.PANE_NO_BUTTON).click(function(){c.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.submitATCForm();h.next()});c.isWarrantyLDSupportEnabled()&&(a.$(g.PANE_ADD_BUTTON_LD).click(function(){var b=function(b){d.logCount(d.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);q.when("EWC").execute("attach-everywhere-cart",
function(a){a.refresh()});a.$("#attach-sheet-warranty-image").clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");h.next()},f=function(a){d.logCount(d.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);h.next()},e=a.$(g.PANE_ADD_BUTTON_LD).find("input"),v={warrantyAsin:e.attr("data-asin"),offeringId:e.attr("data-offering-id"),addWarranty:1,quantity:1};c.isCartApiItemAssociationEnabled()?(v.baseItemAsin=a.$(g.BASE_ASIN).val(),l.addLinkedWarranty(v,
b,f)):l.obtainBaseItemCartId(function(a){v.baseItemCartId=a;l.addLinkedWarranty(v,b,f)})}),a.$(g.PANE_NO_BUTTON_LD).click(function(){h.next()}));a.off("attach:add-base-to-cart",e.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",e.onAttachAddBaseToCart)};e.show=function(){b.selectedBaseLightningDeal?c.isWarrantyLDSupportEnabled()&&b.selectedBaseLightningDeal&&a.$(g.PANE_LD).show():a.$(g.PANE).removeClass("aok-hidden");a.$(g.PANE).fadeIn(400,e.setFocus);d.logWarrantyImpression(e.getWarrantyLoggingPayload());
h=Date.now();a.$(g.PANE).find("h1").first().attr("id","attach-warranty-header");e.sheet.$container.attr("aria-labelledby","attach-warranty-header")};e.hide=function(){a.$(g.PANE+", "+g.PANE_LD).fadeOut();d.logCount(d.CSM_METRICS.WARRANTIES_DWELL_TIME,Math.floor((Date.now()-h)/1E3))};e.setFocus=function(){p.focusDescendant(a.$(g.PANE).get(0),"first");p.focusDescendant(a.$(g.PANE_LD).get(0),"first")};return e});"use strict";q.when("A","attach-common","attach-weblabs","attach-maple","attach-logging",
"attach-variant-registration","attach.utilities.focus-management","attach.amazonapi.client","attach.amazonapi.cart.add-items","attach.amazonapi.cart.summary","attach.utilities.strings").register("attach-desktop-accessories-pane",function(a,b,d,l,c,m,p,e,g,h,v){var f={name:"accessories"},u=!0,D=!1,r,B=!1,C=!1,A,z=f.Endpoints={RENDER:"/gp/product/ajax?experienceId\x3dattach",GET_CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html",ADD_ACCESSORY_TO_CART:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-add-to-cart.html",
PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed"},k=f.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",ACCESSORY_ASIN_LIST:"#attach-asin-list",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",PANE:"#attach-accessory-pane",PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",
PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE:"#attach-cart-description-failure",
PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:"#attach-string-cart-subtotal-single",PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE:"#attach-string-cart-subtotal-multiple",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:"#attach-string-cart-ptc-button-single",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE:"#attach-string-cart-ptc-button-multiple",
PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",
PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",
PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE_MAPLE_SLOT:"#maple-dss-slot",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",
PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",
DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},x=f.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};f.setShouldIncludeMaple=function(a){D=a};f.load=function(d){q.now("attach-external-atc-interceptor").execute(function(a){r=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var n=a.$.Deferred();q.now("dp-util-cookie").execute(function(c){c&&c("session-id")!==a.$("#attach-sessionId").val()&&b.rejectPromise(n,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID",
information:"Unexpected session ID received; expected "+a.$("#attach-sessionId").val()+" but cookie value was "+c("session-id")})});var f=a.$.get(z.RENDER,{asin:a.$(k.BASE_ASIN).val()});if(D){b.isCurrencyOfPreferenceApplied()&&l.suppressMathBox();var e=l.loadBannerHTML()}a.$.when(f,e).done(function(f,w){var e=a.$(f[0].trim()),g=!e.is(k.PANE);e=0===e.find(k.PANE_ACCESSORY_ASIN).length;g||e?b.rejectPromise(n,b.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE","ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"],
information:"Failed to render DSS: isPaneMissing\x3d"+g+" isEmptyAccessoryList\x3d"+e}):(d.$container.append(a.$(f[0]).get(0)),w&&0<w.trim().length&&(w=a.$(w),f=w.not("script"),w=w.filter("script"),b.elementExists(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)?f.insertAfter(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD):f.insertAfter(k.PANE_ACCESORIES_CARD),f.wrap('\x3cdiv id\x3d"maple-dss-slot"\x3e\x3cdiv id\x3d"maple-dss-card" class\x3d"a-section attach-sidesheet-card"\x3e\x3c/div\x3e\x3c/div\x3e'),w.each(function(){a.$.globalEval(this.innerHTML)}),
c.logCount("ATTACH_DSS_MAPLE_RENDERED")),n.resolve())}).fail(function(){b.rejectPromise(n,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE",information:"Failed to render DSS: network request failed"})});return n.promise()};f.onAttachAddBaseToCart=function(a){u=!1;d.isAttachGetCartDescriptionEndpointDeprecated()?b.getPromiseFromDeferred(a).then(f.handleAddBaseAndGetCartDescription).catch(function(a){q.logError(a,"Base product add to cart failed: ","ERROR","attach-desktop-accessories-pane");
f.sheet.fail(b.FailureModes.ERROR_500)}):a.pipe(f.handleAddBaseAndGetCartDescription).pipe(b.pipeJSON).pipe(f.handleCartDescription).fail(function(a,c){f.sheet.fail(a||b.FailureModes.ERROR_500,c)})};f.runOnceSetup=function(){B||(B=!0,a.declarative("attach-accessory-add","click",function(b){var d=b.$currentTarget,n=b.data,e=n.a,g=n.oid;n=n.isLightningDeal;c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);c.beginLatencyCapture(c.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);b=!0===a.$(k.PANE_CATEGORIZED_ACCESSORIES_CARD).data(k.PANE__DATA_CATEGORY_VIEW)?
a.$(b.$target).data(k.PANE__DATA_ASIN_INDEX):a.$(k.PANE_ACCESSORY_ADD_DECLARATIVES).index(d);n?f.addAccessoryToCartWithLightningDeal(b):f.addAccessoryToCart(e,g,b)}))};f.setup=function(b){f.runOnceSetup();a.$(k.PANE).hide();f.sheet=b;a.off("attach:add-base-to-cart",f.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",f.onAttachAddBaseToCart);a.$(k.PANE_VIEW_CART_BUTTON).click(f.viewCart);a.$(k.PANE_CHECKOUT_BUTTON).click(f.proceedToCheckout);a.$(k.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var b=
a.$(this).attr("data-asin"),c=a.$(this).attr("data-oid"),d=a.$(this).attr("data-idx");f.addAccessoryToCart(b,c,d)});a.$(k.PANE).find(k.PANE_CLOSE_BUTTON).appendTo(k.PANE_CART_BLOCK);a.$(k.PANE_CLOSE_BUTTON).click(b.next);a.$(k.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});d.isShowAccessoryCouponsDssEnabled()&&f.initializeCoupons();a.$(k.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var b=a.$(this).data().idx;f.updateLightningDealTimer(b);f.initializeLightningDealStatusRefresher(b)})};
f.show=function(){!b.selectedBaseLightningDeal&&u&&b.submitATCForm();A=Date.now();a.$(k.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear");if(b.selectedBaseLightningDeal)a.$(k.PANE_CART_BLOCK).addClass("aok-hidden"),a.$("#attach-accessory-pane").css("height",a.$(t).height()-161);else{var c=a.$(k.PANE_CART_BLOCK_INNER);c.find("div").addClass("aok-hidden");c.append(a.$(k.PANE_CART_SPINNER).removeClass("aok-hidden"))}f.initializeAccessoriesDisplay();q.now("attach-categorized-cards").execute(function(a){a!==
y&&a.initializeCategorizedCards()})};f.hide=function(){a.$(k.PANE).hide();a.$(k.PANE_CART_SPINNER).addClass("aok-hidden");a.$(k.PANE_HUC_MESSAGE).remove();a.$(k.PANE_ACCESSORY_ASIN).each(function(b,c){(c=a.$(c).data(k.PANE__DATA_ASIN_INDEX))&&(b=c);f.updateAccessoryStatus(b,x.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");r&&r.unloadAttachModule();c.logCount(c.CSM_METRICS.ACCESSORIES_DWELL_TIME,Math.floor((Date.now()-A)/1E3));a.trigger("aloha:detailPage:reappear");u=!0};f.viewCart=function(){c.logCount(c.CSM_METRICS.ATTACH_CART_CLICK);
document.location=""};f.proceedToCheckout=function(){c.logCount(c.CSM_METRICS.ATTACH_CHECKOUT_CLICK);document.location=C?z.PROCEED_TO_CHECKOUT+"\x26cartInitiateId\x3d"+C+"\x26ref_\x3ddp_atch_dss_proceed":z.PROCEED_TO_CHECKOUT+"\x26ref_\x3ddp_atch_dss_proceed"};f.updateNavCartDisplayQuantity=function(b){var c=Number(b);b=isNaN(c)?"":100>c?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===c).toggleClass("nav-cart-1",1<=c&&10>c).toggleClass("nav-cart-10",10<=c&&20>c).toggleClass("nav-cart-20",
20<=c&&100>c).toggleClass("nav-cart-100",100<=c).text(b)};f.createCartSubtotalLabelString=function(b){var c=a.$(1==b?k.PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:k.PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE).val();return v.substituteParameters(c,{quantity:b})};f.createProceedToCheckoutString=function(b){var c=a.$(1==b?k.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:k.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE).val();return v.substituteParameters(c,{quantity:b})};f.updateCartSummary=function(){return h.get([h.CART_TYPE_RETAIL]).then(f.handleCartDescription).catch(f.handleCartDescriptionError)};
f.requestCartDescription=function(b){var c={marketplaceId:a.$(k.MARKETPLACE_ID).val(),asin:a.$(k.BASE_ASIN).val(),languageOfPreference:a.$(k.LANGUAGE_OF_PREFRENCE).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val()};if(b)for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return a.$.post(z.GET_CART_DESCRIPTION,c)};f.handleAddBaseAndGetCartDescription=function(n){c.logCount(c.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);n=a.$(n);n.find("#sw-atc-confirmation").length?(f.renderFallbackSmartWagonFeedback(n),
f.renderFallbackSmartWagonBaseAddStatusIcon(n)):(f.renderHUCFeedback(n),f.renderBaseAddStatusIcon(n));if(r)try{var e=a.$(k.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();r.loadAttachModule(e)}catch(E){q.logError(E,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}f.sheet.$container.attr("aria-labelledby","attachDisplayAddBaseAlert");p.focusDescendant(a.$(k.PANE).get(0),"first");return d.isAttachGetCartDescriptionEndpointDeprecated()?f.updateCartSummary():
f.requestCartDescription().pipe(null,function(a,d,n){q.logError(Error(d),"AJAX cart description call failed: ","ERROR","attach-desktop-accessories-pane");return b.reject(null,{count:c.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_FAILURE})})};f.handleCartDescription=function(n){var w=0;try{if(d.isAttachGetCartDescriptionEndpointDeprecated()){var g=n.entity.summary[0]||h.EMPTY_CART_RETAIL,v=g.subtotal;w=g.itemCount;var m=Number(v.amount);var p=e.formatMoney(v);var r=f.createCartSubtotalLabelString(w);var t=
f.createProceedToCheckoutString(w)}else{var u=isNaN(parseInt(n.totalPrice)),x=isNaN(parseInt(n.itemQuantity)),z=!a.$.isArray(n.includedAsins),y=0===n.formattedTotalPrice.trim().length,A=0===n.cartSubtotalString.trim().length,B=0===n.itemQuantityString.trim().length;g=u||x||z;y||A||B;if(g)throw Error("Received invalid cart description: hasInvalidCartTotalPrice\x3d"+u+" hasInvalidCartItemQuantity\x3d"+x+" hasInvalidCartIncludedAsins\x3d"+z+" hasInvalidCartFormattedTotalPrice\x3d"+y+" hasInvalidCartSubtotal\x3d"+
A+" hasInvalidCartQuantity\x3d"+B);w=n.itemQuantity;m=Number(n.totalPrice);p=n.formattedTotalPrice;r=n.cartSubtotalString;t=n.itemQuantityString;var F=n.coreFreeShippingMessage}f.updateNavCartDisplayQuantity(w);a.$(k.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(r);a.$(k.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(p);a.$(k.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(t);a.$(k.PANE_CHECKOUT_BUTTON).removeClass("aok-hidden");a.$(k.PANE_VIEW_CART_BUTTON).removeClass("a-button-primary");a.$("#attach-customerId").val()&&
q.when("attach-preinitiate-checkout").execute(function(a){C=a.getCartInitiateId();a.preinitiateCheckout(C)});F&&a.$(k.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(F);D&&l.updateMathBox(m);b.selectedBaseLightningDeal||(a.$(k.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(k.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(k.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).addClass("aok-hidden"));a.delay(f.revealIMBMessages,200);q.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});
c.logCount(c.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);return n}catch(G){if(d.isAttachGetCartDescriptionEndpointDeprecated())throw G;q.logError(G,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");return b.reject(null,{count:"ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE"})}};f.handleCartDescriptionError=function(d){q.logError(d,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");c.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE");
b.selectedBaseLightningDeal||(a.$(k.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(k.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(k.PANE_CART_BLOCK_SUBTOTAL_LABEL).empty(),a.$(k.PANE_CART_BLOCK_SUBTOTAL_PRICE).empty(),a.$(k.PANE_CHECKOUT_BUTTON).addClass("aok-hidden"),a.$(k.PANE_VIEW_CART_BUTTON).addClass("a-button-primary"),a.$(k.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).removeClass("aok-hidden"))};f.updateAccessoryStatus=function(b,c){a.$(k.PANE_ACCESSORY_ADD_BUTTON_PREFIX+
b).toggleClass("aok-hidden",c!==x.INITIAL);a.$(k.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).toggleClass("aok-hidden",c!==x.ADDING);a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).toggleClass("aok-hidden",c!==x.SUCCESS);a.$(k.PANE_ACCESSORY_ADD_ERROR_PREFIX+b).toggleClass("aok-hidden",c!==x.ERROR);a.$("#tile-add-accessory-badge-"+b).toggleClass("aok-hidden",c!==x.SUCCESS);a.$("#attach-accessory-tile-"+b).toggleClass("in-cart",c===x.SUCCESS);b=a.$("#attach-accessory-asin-"+(b+1)).parent();p.focusDescendant(b.get(0),
"first")};f.addAccessoryToCart=function(n,e,h){f.updateAccessoryStatus(h,x.ADDING);var w=function(e){if(!d.isAttachGetCartDescriptionEndpointDeprecated()&&-1===a.$.inArray(n,e.includedAsins))return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});f.updateAccessoryStatus(h,x.SUCCESS);c.logAccessoryAddToCart(f.getAccessoryLoggingData(h));c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",h);q.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()})},
v=function(){c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);f.updateAccessoryStatus(h,x.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",h)};if(d.isAttachAddToCartEndpointDeprecated()){var l=function(a){if(a.type===g.RESPONSE_TYPE_SUCCESS)return d.isAttachGetCartDescriptionEndpointDeprecated()?f.updateCartSummary():f.requestCartDescription().promise();q.logError(Error(a.entity.details.message),"Could not add accessory via AmazonAPI ("+n+"):","ERROR","attach-desktop-accessories-pane");throw a.entity.details.message;
},m=a.$(k.BASE_ASIN).val(),p=parseInt(a.$(k.QUANTITY).val())||1,E=y;b.isDiscriminatedOffersEnabled()&&(E={itemAssociation:{programType:"Attach",renderType:"renderAll",associatedItemId:m,deleteConstraint:{mutuallyInclusive:!1}}});e={asin:n,offerListingId:e,quantity:p,additionalParameters:E};d.isAttachGetCartDescriptionEndpointDeprecated()?g.addItems([e],"dp_atch_dss_atc_").then(l).then(w).catch(v):g.addItems([e],"dp_atch_dss_atc_").then(l).then(b.pipeJSON).then(f.handleCartDescription).then(w).catch(v)}else l=
{marketplaceId:a.$(k.MARKETPLACE_ID).val(),asin:a.$(k.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),accessoryItemAsin:n,accessoryItemOfferingId:e,languageOfPreference:a.$(k.LANGUAGE_OF_PREFRENCE).val(),accessoryItemQuantity:a.$(k.QUANTITY).val(),accessoryItemPrice:a.$("#attach-accessory-base-price-"+h).val(),accessoryMerchantId:a.$("#attach-accessory-merchantId-"+h).val(),accessoryProductGroupId:a.$("#attach-accessory-product-category-code-"+
h).val()},b.isDiscriminatedOffersEnabled()&&(e={},e=b.isMTAEnabledForAttach()?{itemAssociationGroup:'{"parentAsin":"'+l.asin+'","type":"Attach","renderType":"renderAll","constraintList":[{"mutuallyInclusive":false,"type":"DELETE"}]}'}:{itemAssoc:b.uniqueId,itemAssocType:b.itemAssocTypeValue,itemAssocRenderType:"renderAll"},l.keyValuePairs=JSON.stringify(e)),a.$.post(z.ADD_ACCESSORY_TO_CART,l).pipe(b.pipeJSON).pipe(f.handleCartDescription).pipe(w).fail(v)};f.addAccessoryToCartWithLightningDeal=function(n){f.updateAccessoryStatus(n,
x.ADDING);var e=a.$("#attach-accessory-claim-deal-url-"+n).val(),g=f.getDealId(e);e=a.$("#attach-accessory-claim-deal-params-"+n).val();e=JSON.parse(b.unescapeJson(e));e="/gp/deal/ajax/v2/claimDeal.html?dealId\x3d"+g+"\x26itemId\x3d"+e.asin+"\x26quantity\x3d1\x26clientId\x3dattach\x26nocache\x3d"+Date.now();g&&e&&(g=a.$(k.PANE_ACCESSORY_CSRF_TOKEN).val(),a.$.ajax({type:"POST",url:e,headers:{"X-CSRFToken":g}}).pipe(function(e){var g=e.dealItemStatus&&e.dealItemStatus.customerState;if("1"!==e.isClaimed&&
"INWAITLIST"!==g)return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===g?a.$(k.PANE_ACCESSORY_ADD_SPINNER_PREFIX+n).addClass("aok-hidden"):f.updateAccessoryStatus(n,x.SUCCESS);c.logAccessoryAddToCart(f.getAccessoryLoggingData(n));c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);e=e.dealItemStatus&&e.dealItemStatus.msToCustomerStateExpiry;f.handleLightningDealAddToCart(n,e?e:900,g);a.trigger("UPSELL_ASIN_ADDED_TO_CART",n);q.when("EWC").execute("attach-everywhere-cart",
function(a){a.refresh()});d.isAttachGetCartDescriptionEndpointDeprecated()?f.updateCartSummary():f.requestCartDescription({isLightningDeal:!0}).pipe(b.pipeJSON).pipe(f.handleCartDescription)}).fail(function(){c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);f.updateAccessoryStatus(n,x.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",n)}))};f.getDealId=function(a){return(a=a.match(/\/api\/marketplaces\/\w+\/deals\/(.*?)\/claim-and-add-to-cart/))?a[1]:y};f.revealIMBMessages=function(){var b=a.$(k.PANE_HUC_MESSAGE);
if(b.hasClass("aok-hidden")){b.css({position:"absolute",top:0}).removeClass("aok-hidden");var c=b.children().height();0<c&&b.css({marginTop:-1*(c+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}};f.renderHUCFeedback=function(f){var e=f.find("#hlb-ship-message");f=a.$().add(f.find("#huc-v2-message-group")).add(f.find("#hlb-imb"));d.isCoreFreeShippingMessageEnabled()&&b.elementExists(e)&&a.$(k.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(e.html());0<f.length&&(e=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),
e.append(f),e.insertAfter(k.PANE_CART_BLOCK),e.find(".a-declarative a").unwrap(),e.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),e.find(".sc-action-quantity").hide(),(e=f.find(".a-alert-heading").text())&&c.logDSSWarningMessage(e))};f.renderBaseAddStatusIcon=function(c){var d;b.elementExists(c.find("#huc-v2-order-row-confirm-text"))?d=c.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):b.elementExists(c.find("#hl-confirm-text"))&&(d=c.find("#hl-confirm-text").hasClass("a-alert-warning"));
d=(d?a.$(k.PANE_CART_BASE_ERROR_ALERT):a.$(k.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(k.PANE_CART_BASE_ALERT).remove();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);d=c.find(".huc-v2-order-row-image").clone();b.elementExists(d)||(d=c.find(".hlb-product-image").clone());if(1<d.length){d=d.first();var f=a.$('input[name^\x3d"asin"].attach-warranty-input');0===f.length&&(f=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(b.elementExists(f))for(var e=0;e<
f.length;e++){var n=f[e].value,g=c.find("#huc-v2-order-row-item-"+n);if(g.length){c=b.elementExists(g)?g.find(".huc-v2-order-row-image"):c.find(".hlb-item-link.hlb-asin-"+n+" \x3e img");d=d.add(c.clone());break}}}a.$(k.PANE_CART_BASE_HUC_IMAGE).remove();a.$(k.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(d);d.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};f.renderFallbackSmartWagonFeedback=function(b){b=b.find("#cart-important-message-box");if(0<b.length){var c=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e");
c.append(b);c.find("#sc-important-message-alert").removeClass("a-spacing-medium-plus").addClass("a-spacing-mini");c.find(".sc-action-quantity").hide();c.insertAfter(k.PANE_CART_BLOCK)}};f.renderFallbackSmartWagonBaseAddStatusIcon=function(b){var c=b.find(".sw-atc-message").first().parent().clone();c.prop("id","attachDisplayAddBaseAlert");c.addClass("sw-fallback");c.addClass("aok-hidden");a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).empty();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(c);b.find("#add-to-cart-confirmation-image").find(".sc-product-image").clone().appendTo(k.PANE_CART_BASE_ALERT_IMAGE_AREA).wrap('\x3cdiv class\x3d"huc-image-wrapper aok-hidden sw-fallback"\x3e\x3c/div\x3e');
b=b.find(".sw-atc-extra-item").clone().appendTo(k.PANE_CART_BASE_ALERT_IMAGE_AREA);b.addClass("aok-hidden sw-fallback");b.find(".sw-atc-item-no").prepend('\x3cspan class\x3d"a-size-small"\x3e+\x3c/span\x3e')};f.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+
b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+
b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};f.createAccessoryImpressions=function(){var b=[];a.$(k.PANE_ACCESSORY_ASIN).parent().each(function(c,d){d=a.$(d);if(d.is(":hidden")||"hidden"===d.css("visibility")||d.prop("data-accessory-seen"))return null;d.prop("data-accessory-seen",!0);b.push(f.getAccessoryLoggingData(c))});return b};f.resetAccessoryImpressions=function(){a.$(k.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};f.initializeAccessoriesDisplay=
function(){f.initializeAccessoriesCards();f.initializeAccessoriesTiles();f.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){f.resetAccessoryImpressions();c.logAccessoryImpressions(f.createAccessoryImpressions())})};f.initializeAccessoriesCards=function(){a.$(k.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),d=b.find(k.PANE_ACCESSORY_CARD_SEE_MORE),e=b.find(k.PANE_ACCESSORY_CARD_SEE_LESS),g=b.find(k.PANE_ACCESSORY_CARD_EXPAND_CONTENT);d.show();e.hide();g.hide();b.removeProp("data-card-expanded");
b.removeProp("data-card-previously-expanded");d.click(function(){d.hide();e.show();g.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),c.logAccessoryImpressions(f.createAccessoryImpressions()));c.logCount(c.CSM_METRICS.ATTACH_SHOW_MORE)});e.click(function(){e.hide();d.show();g.slideUp(400);b.prop("data-card-expanded",!1);c.logCount(c.CSM_METRICS.ATTACH_SHOW_LESS)})})};
f.initializeAccessoriesTiles=function(){q.when("a-truncate").execute(function(b){a.$(k.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(k.PANE_ACCESSORY_TILE_ITEM).hover(function(){var c=a.$(this).find(k.PANE_ACCESSORY_TITLE);c.length&&b.get(c.get()).update()})});a.$(k.PANE_ACCESSORY_TILE_ITEM).attr("tabindex",0)};f.initializeCategorizedAccessoriesCards=function(){b.elementExists(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",
function(){c.logAccessoryImpressions(f.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){c.logAccessoryImpressions(f.createAccessoryImpressions())}))};f.initializeAccessoriesCarousel=function(){q.when("a-truncate","a-carousel-framework").execute(function(b,d){if(a.$(k.PANE_ACCESSORY_CAROUSEL).length){a.$(k.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});d.createAll();var e=d.getCarousel(a.$(k.PANE_ACCESSORY_CAROUSEL));e&&(e.attachViewedPages=
[1],e.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=e.getAttr("pageNumber"),-1===e.attachViewedPages.indexOf(a)&&(e.attachViewedPages.push(a),c.logAccessoryImpressions(f.createAccessoryImpressions())))}))}})};f.initializeCoupons=function(){var b;a.$(k.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",f.handleCouponPopoverPositionUpdated);
a.on("a:popover:beforeShow:attach-coupon-popover",function(c){c.popover.$trigger.parents(k.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=f.createCouponPopoverPositionHandler(c);a.$(t).bind("scroll",b);a.$(k.PANE+" \x3e .a-scroller").bind("scroll",b)});a.on("a:popover:afterHide:attach-coupon-popover",function(c){c.popover.$trigger.parents(k.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(t).unbind("scroll",b);a.$(k.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox",
"change",function(b){var c=b.data,d=b.$currentTarget.parents(k.PANE_ACCESSORY_COUPON);c&&c.ajaxClaimUrl?a.$.get(c.ajaxClaimUrl).done(function(){f.handleCouponClaimSuccess(d,c.accessoryItemIndex)}).fail(function(a,b,c){q.logError(Error(c),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");f.handleCouponClaimError(d)}):(q.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),f.handleCouponClaimError(d))})};f.handleCouponPopoverPositionUpdated=
function(a){a.popover.$container.css("z-index",6E3)};f.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};f.handleCouponClaimSuccess=function(a,b){c.logPromotionClaimed(f.getAccessoryLoggingData(b-1));a.find(k.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(k.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(k.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),
a.find(k.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};f.handleCouponClaimError=function(a){a.find(k.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};f.updateLightningDealTimer=function(b){var c=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(c);var d=f.convertTimeLeftToString(c);
a.$("#attach-accessory-deal-timer-string-"+b).text(d);0===c?f.handleDealHasEnded(b):setTimeout(f.updateLightningDealTimer,1E3,b)};f.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?f.appendZeroIfSingleDigit(c)+":"+f.appendZeroIfSingleDigit(a):b+":"+f.appendZeroIfSingleDigit(c)+":"+f.appendZeroIfSingleDigit(a)};f.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};f.handleDealHasEnded=function(b){a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&
(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};f.updateLightningDealTimeToCheckoutTimer=function(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(c);var d=f.convertTimeLeftToString(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(d);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+
b).addClass("aok-hidden"),a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(k.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(f.updateLightningDealTimeToCheckoutTimer,1E3,b)};f.handleLightningDealAddToCart=function(b,c,d){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===d?a.$("#attach-accessory-deal-on-waitlist-"+
b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(c/1E3),f.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+b).removeClass("aok-hidden"))};f.initializeLightningDealStatusRefresher=function(c){var d=a.$("#attach-accessory-claim-deal-params-"+c).val(),e=JSON.parse(b.unescapeJson(d));a.$("#attach-accessory-deal-has-ended-"+c).hasClass("aok-hidden")&&(d=[{dealID:e.dealId}],
d=JSON.stringify({requestMetadata:{marketplaceID:a.$(k.MARKETPLACE_ID).val(),clientID:"goldbox_udp",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:d,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:d,success:function(a){a=a.dealStatus[e.dealId];var b=Number.MAX_VALUE;a&&f.updateLightningDealInfo(c,a.dealState,a.percentClaimed)&&
setTimeout(f.initializeLightningDealStatusRefresher,b<a.msCacheTtl?b:3E4,c)}}))};f.updateLightningDealInfo=function(b,c,d){if("AVAILABLE"!==c&&"WAITLIST"!==c)return f.handleDealHasEnded(b),!1;var e=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===c?e.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===c&&e.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(d);a.$("#attach-accessory-deal-progress-bar-width-"+
b).width(d+"%");return!0};return f});"use strict";q.when("A","attach-common","attach-weblabs","attach.utilities.focus-management").register("attach-desktop-side-sheet",function(a,b,d,l){var c={},m=[],p=-1,e,g,h,v,f,q,D=null,r=null,B=null,C=!1,A=null,z="false",k="auto",x=null,n=c.Selectors={PAGE_BACKGROUND:"#a-page",PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",MODAL_LAYER:".attach-dss-modal-layer",LIGHTBOX:"#attach-popover-lgtbox"};c.transitionDuration=500;c.onKeyDown=function(a){27===
a.which&&c.next()};c.initialize=function(){m=[];b.elementExists(n.MODAL_LAYER)?v=a.$(n.MODAL_LAYER):(v=a.$("\x3cdiv class\x3d'attach-dss-modal-layer'\x3e\x3c/div\x3e"),v.hide(),v.appendTo(document.body));b.elementExists(n.SHEET)?c.$container=a.$(n.SHEET):(c.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),c.$container.addClass("aok-hidden"),c.$container.appendTo(n.PLACEHOLDER));D=c.$container.parent();b.elementExists(n.LIGHTBOX)||
(f=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'a-declarative attach-dss-backdrop' data-action\x3d'a-popover-floating-close'\x3e\x3c/div\x3e"),f.hide(),f.appendTo(v),f.click(c.next));a.$(document).unbind("keydown",c.onKeyDown);a.$(document).keydown(c.onKeyDown);e=function(){};g=function(){};h=!0};c.setFailureHandler=function(a){e=a};c.setCloseHandler=function(a){g=a};c.fail=function(a,b){e(a,b)};c.addPane=function(a){m.push(a)};c.removePane=function(a){a=m.indexOf(a);-1<a&&m.splice(a,1)};
c.getPaneIndex=function(a){return m.indexOf(a)};c.insertPane=function(a,b){b===y&&(b=m.length);m.splice(b,0,a);h=!0};c.hasPane=function(a){return-1<c.getPaneIndex(a)};c.next=function(){if(p+1===m.length){f.hide();c.$container.animate({right:q},{duration:c.transitionDuration,complete:function(){m[p].hide();p=-1;g();v.hide();x.focus();c.$container.appendTo(D)}});t.ue&&t.ue.count&&t.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(t.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1);var b=a.$(n.PAGE_BACKGROUND).get(0);
document.body.style.overflow=k;b.ariaHidden=z;r.remove();B.remove();a.trigger("HIDE_SIDE_SHEET")}else-1!==p&&(m[p].hide(),m[p+1].show(),p+=1)};c.show=function(){if(h){h=!1;var b=a.$.map(m,function(a){return a.load(c)});a.$.when.apply(a.$,b).fail(c.fail).done(function(){a.$.each(m,function(a,b){b.setup(c)});c.show()})}else{v.show();c.$container.addClass("aok-hidden").attr("role","dialog").attr("aria-modal","true").appendTo(v);p=0;m[p].show();q=c.$container.css("right");c.$container.removeClass("aok-hidden");
c.$container.animate({right:"0"},c.transitionDuration,"linear");f.show();t.ue&&t.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",t.ue.count(b,(t.ue.count(b)||0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",t.ue.count(b,(t.ue.count(b)||0)+1));b=document.body;var d=a.$(n.PAGE_BACKGROUND).get(0);z=d.ariaHidden;d.ariaHidden="true";k=b.style.overflow;b.style.overflow="hidden";
x=document.activeElement;r=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(c.$container);B=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(c.$container)}};c.isEmpty=function(){return 0===m.length};document.addEventListener("focus",function(a){if(!C&&-1!==p){var b=c.$container.get(0);b.contains(a.target)?A=a.target:(C=!0,l.focusDescendant(b,"first"),A===document.activeElement&&l.focusDescendant(b,"last"),C=!1,A=document.activeElement)}},!0);c.isOpen=function(){return-1!==p};
return c});"use strict";q.when("A","attach-common","attach-weblabs","attach-logging","attach-maple","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach-variant-registration").register("attach-desktop",function(a,b,d,l,c,m,p,e,g){var h={},v,f=!0,u=h.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",LD_CLAIM_ERROR:"deals_claimDealError"},
y=h.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},r=h.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ASIN:"#ASIN",QUANTITY:"#quantity",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_ASIN_LIST:"#attach-asin-list",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",INSTALLMENTS_BUTTON:"#installments-button",MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",
WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc",ATTACH_LD_CONTAINER:"#attach-ld-container"},B=h.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},C=-1,A=function(){a.off(u.LD_CLAIM_SUCCESS,A);a.off(u.LD_CLAIM_ERROR,z);b.selectedBaseLightningDeal=!0;e.setCloseHandler(h.setupAddToCartButton);h.handleLdAddToCartClick();q.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()})},
z=function(){a.off(u.LD_CLAIM_ERROR,z);a.off(u.LD_CLAIM_SUCCESS,A);a.$(r.LD_ATC_BUTTON).bind(u.CLICK,k)},k=function(){a.$(r.LD_ATC_BUTTON).unbind(u.CLICK,k);a.on(u.LD_CLAIM_SUCCESS,A);a.on(u.LD_CLAIM_ERROR,z)};h.initialize=function(){if(!b.elementExists(e.Selectors.PLACEHOLDER)){if(0===d.getAllWeblabsToTriggerClientSide().length)return!1;f=!1}if(e.isOpen())return!1;h.setupDependencies();h.setupSideSheet();h.setupAddToCartButton()};h.setupDependencies=function(){var b=a.$(r.ATTACH_MARKETPLACE_ID).val();
l.initialize(l.FEATURES.DSS,b);l.setPayloadBuilder(function(){return{baseAsin:a.$(r.ASIN).val(),baseItemPriceDecimal:parseFloat(a.$(r.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(r.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(r.QUANTITY).val())||1}});c.initialize();q.when("attach-external-atc-interceptor").execute(function(a){v=a;v.enableModule()})};h.setupSideSheet=function(){e.initialize();e.setFailureHandler(h.failure);!d.isWarrantyPaneSuppressed()&&b.hasWarranty()?
e.addPane(m):p.setShouldIncludeMaple(!0);!d.servicesInterstitialDeprecated()||b.hasAccessories()?(e.addPane(p),e.setCloseHandler(h.setupAddToCartButton)):e.setCloseHandler(h.failureTransitionToHUC)};h.setupAddToCartButton=function(){a.$(document.body).delegate(r.ADD_TO_CART_BUTTON,u.ATTACH_ATC_CLICK_NAMESPACE,h.handleAddToCartClick);a.$(r.ADD_TO_CART_BUTTON).prop("type","button").addClass(B.ATTACH_DSS_ATC);d.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).delegate(r.INSTALLMENTS_BUTTON,
u.ATTACH_ATC_CLICK_NAMESPACE,h.handleAddToCartClick),a.$(r.INSTALLMENTS_BUTTON).prop("type","button").addClass(B.ATTACH_DSS_ATC));b.elementExists(r.LD_BUY_BOX)&&b.elementExists(r.ATTACH_LD_CONTAINER)?(a.$(r.LD_ATC_BUTTON).bind(u.CLICK,k).addClass(B.ATTACH_DSS_ATC),!d.isWarrantyPaneSuppressed()&&b.hasWarranty()&&!e.hasPane(m)&&-1<C&&e.insertPane(m,C),l.logCount(l.CSM_METRICS.ATTACH_BASE_LD_PRESENT)):b.elementExists(r.LD_BUY_BOX)&&!b.elementExists(r.ATTACH_LD_CONTAINER)&&l.logCount(l.CSM_METRICS.DSS_LD_MISSING_ATTACH);
l.logCount(l.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};h.failure=function(a,c){switch(a){case b.FailureModes.ERROR_500:h.failureError500();break;case b.FailureModes.RESUBMIT_BUY_BOX:h.failureResubmitBuyBox();break;case b.FailureModes.UNBIND_ATC:h.failureUnbindATC();break;case b.FailureModes.REBIND_ATC:h.failureRebindATC();break;default:case b.FailureModes.TRANSITION_TO_HUC:h.failureTransitionToHUC()}};h.failureError500=function(){t.location=y.ERROR_500_URL};h.failureResubmitBuyBox=function(){b.selectedBaseLightningDeal?
h.failureRebindATC():(h.failureUnbindATC(),b.buyButton.click())};h.failureUnbindATC=function(){a.$(document.body).undelegate(r.ADD_TO_CART_BUTTON,u.ATTACH_ATC_CLICK_NAMESPACE);d.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(r.INSTALLMENTS_BUTTON,u.ATTACH_ATC_CLICK_NAMESPACE),a.$(r.INSTALLMENTS_BUTTON).prop("type","submit"));a.$(r.ADD_TO_CART_BUTTON).prop("type","submit")};h.failureTransitionToHUC=function(){if(b.selectedBaseLightningDeal)return h.failureUnbindATC();d.servicesInterstitialDeprecated()?
a.$(document.body).undelegate(r.ADD_TO_CART_BUTTON,u.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(r.ADD_TO_CART_BUTTON,u.WARRANTY_SI_CLICK_NAMESPACE);d.isInstallmentsDssIntegrationEnabled()&&(d.servicesInterstitialDeprecated()?a.$(document.body).undelegate(r.INSTALLMENTS_BUTTON,u.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(r.INSTALLMENTS_BUTTON,u.WARRANTY_SI_CLICK_NAMESPACE));h.failureResubmitBuyBox()};h.failureRebindATC=function(){h.setupAddToCartButton()};h.handleAddToCartClick=
function(c){b.buyButton=a.$(c.target);a.$(document.body).undelegate(r.ADD_TO_CART_BUTTON,u.ATTACH_ATC_CLICK_NAMESPACE);d.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(r.INSTALLMENTS_BUTTON,u.ATTACH_ATC_CLICK_NAMESPACE),b.getAtcForm().append(b.buyButton.filter("input").clone().attr("type","hidden")));b.elementExists(r.LD_BUY_BOX)&&a.$(r.LD_ATC_BUTTON).unbind(u.CLICK,k);b.selectedBaseLightningDeal||!d.servicesInterstitialDeprecated()||b.hasAccessories()||e.setCloseHandler(h.failureTransitionToHUC);
a.$.when().pipe(h.checkWarranty).pipe(h.checkClientSideWeblabTriggering).pipe(h.checkFeatureExists).pipe(h.show).fail(h.failure);if(f)return c.preventDefault(),c.stopImmediatePropagation(),!1};h.handleLdAddToCartClick=function(){a.$(document.body).undelegate(r.ADD_TO_CART_BUTTON,u.ATTACH_ATC_CLICK_NAMESPACE);a.$(r.LD_ATC_BUTTON).unbind(u.CLICK,k);a.$.when().pipe(h.checkWarranty).pipe(h.checkClientSideWeblabTriggering).pipe(h.checkFeatureExists).pipe(h.show).fail(h.failure)};h.checkFeatureExists=function(){if(h.shouldSuppressForFeatureNotPresent())return b.selectedBaseLightningDeal?
(a.trigger("HIDE_SIDE_SHEET"),b.selectedBaseLightningDeal=!1,b.reject(b.FailureModes.REBIND_ATC)):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};h.checkWarranty=function(){if(!d.isWarrantyPaneSuppressed())if(b.selectedBaseLightningDeal&&(!d.isWarrantyLDSupportEnabled()||b.isMultiQuantityDeal()||!a.$("#atch__bl").length||!a.$("#attach-warranty-ld #attach-warranty-asin").val()))C=e.getPaneIndex(m),e.removePane(m);else if(h.shouldSuppressForWarrantyInMbb())e.removePane(m),
p.setShouldIncludeMaple(!0),l.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1);else if(d.servicesInterstitialDeprecated()&&h.shouldSuppressforMultiQuantityMonthlyWarranty())e.removePane(m),p.setShouldIncludeMaple(!0),l.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1);else if(!d.isWarrantyServicesInterstitialCheckDisabled()&&b.hasWarranty())return a.$.get(y.WARRANTY_SI_CHECK).pipe(h.handleSICheck,h.handleSIFailure)};h.checkClientSideWeblabTriggering=function(){d.triggerClientSideWeblabs();
if(!d.servicesInterstitialDeprecated()&&!b.elementExists(r.ATTACH_ASIN_LIST))return b.reject(b.FailureModes.UNBIND_ATC,{count:"ATTACH_DSS_SUPPRESSED_EMPTY_ASIN_LIST"})};h.handleSICheck=function(a){if(!a)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(e.removePane(m),p.setShouldIncludeMaple(!0),l.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};h.handleSIFailure=function(){return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};
h.shouldSuppressForFeatureNotPresent=function(){return d.servicesInterstitialDeprecated()?!b.elementExists(e.Selectors.PLACEHOLDER)||e.isEmpty():!b.elementExists(e.Selectors.PLACEHOLDER)||!b.elementExists(r.ATTACH_ASIN_LIST)||!b.elementExists(r.ATTACH_MARKETPLACE_ID)||!b.elementExists(r.ATTACH_BASE_ASIN)};h.shouldSuppressForWarrantyInMbb=function(){return d.isWarrantyTwisterPlusDesktopEnabled()?0<a.$(r.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(r.WTY_TWISTER_SELECTED_GROUP).filter(r.WTY_TWISTER_WTY_OPTION).length:
0<a.$(r.MBB_WARRANTY_ITEM).filter(":checked").length};h.shouldSuppressforMultiQuantityMonthlyWarranty=function(){var c=Number(a.$(r.QUANTITY).val())||1;return b.hasMonthlyWarranty()&&1<c};h.show=function(){e.show()};return h});q.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",function(a,b,d){b.initialize();a.on("a:pageUpdate",a.debounce(function(){b.initialize();a.trigger("attach:dss:initialized")},300))});"use strict";q.when("A","attach-logging").register("attach-lightning-deals-common",
function(a,b){var d={Constants:{LD_ID_PREFIX:"gb_atc_",ATTACH_LD_CONTAINER:'\x3cdiv id\x3d"attach-ld-container" class\x3d"aok-hidden"\x3e\x3c/div\x3e',ALERTS:["a-alert-success","a-alert-warning","a-alert-error"],ATTACH_LD_TIME:'\x3cp class\x3d"a-color-success a-text-bold" id\x3d"attach-ld-time"\x3e\x3c/p\x3e'},Endpoints:{LD_STATUS:"/xa/dealcontent/v2/GetDealStatus",CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html"},Selectors:{ATTACH_LD_CONTAINER:"#attach-ld-container",
ATTACH_LD_ALERT:"#attach-ld-alert",ATTACH_LD_ICON:"#attach-ld-icon",ATTACH_LD_STATUS:"#attach-ld-status",ATTACH_LD_SUCCESS:"#attach-ld-success",ATTACH_LD_RECLAIM:"#attach-ld-reclaim",ATTACH_LD_EXPIRED:"#attach-ld-expired",ATTACH_LD_ERROR:"#attach-ld-error",ATTACH_LD_INFO:".attach-ld-info",ATTACH_LD_TIME:"#attach-ld-time",ATTACH_BASE_ASIN:"#attach-baseAsin, #attach-base-asin",LD_TIMER_PREFIX:"#deal_checkout_timer_",LD_ID_OBJECT:"div[id^\x3dgb_atc_]"},Events:{CLICK:"click",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",
DSS_CLOSE:"HIDE_SIDE_SHEET",MBS_CLOSE:"a:sheet:afterHide:attach_accessory_sheet"},DealStates:{AVAILABLE:"AVAILABLE",INCART:"INCART",EXPIRED:"EXPIRED",WAITLIST:"WAITLIST",NONE:"NONE"}};d.dealItemState;d.dealCustomerState;d.dealMsToCustomerStateExpiry;d.dealId;d.baseAsin;d.initializeAttachLD=function(){d.baseAsin=a.$(d.Selectors.ATTACH_BASE_ASIN).val();d.dealId=a.$(d.Selectors.LD_ID_OBJECT).prop("id").replace(d.Constants.LD_ID_PREFIX,"");e()};d.hasLightningDealTimer=function(){return d.dealId?a.$(d.Selectors.LD_TIMER_PREFIX+
d.dealId).length:!1};d.attachDealTimerExists=function(){return 0<a.$(d.Selectors.ATTACH_LD_INFO+" p").length};d.updateLDUX=function(){0>d.dealMsToCustomerStateExpiry&&(d.dealCustomerState=d.DealStates.EXPIRED);switch(d.dealItemState){case d.DealStates.AVAILABLE:case d.DealStates.WAITLIST:switch(d.dealCustomerState){case d.DealStates.NONE:case d.DealStates.INCART:l();break;case d.DealStates.EXPIRED:c(d.Selectors.ATTACH_LD_RECLAIM);break;default:m()}a.delay(d.updateLDUX,1E3);break;case d.DealStates.EXPIRED:c(d.Selectors.ATTACH_LD_EXPIRED);
break;default:m()}};var l=function(){d.dealCustomerState!==d.DealStates.NONE&&(p(d.Selectors.ATTACH_LD_SUCCESS),a.$(d.Selectors.ATTACH_LD_TIME).text(a.$(d.Selectors.LD_TIMER_PREFIX+d.dealId).text()),d.dealMsToCustomerStateExpiry-=1E3,a.$(d.Selectors.ATTACH_LD_ALERT).hasClass("a-alert-success")||(a.$(d.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-warning a-alert-error").addClass("a-alert-success"),a.$(d.Selectors.ATTACH_LD_ICON).removeClass("a-icon-warning a-icon-error").addClass("a-icon-success")),
a.$("#attachSiAddCoverage-ld").hasClass("aok-hidden")&&a.$("#attachSiAddCoverage-ld").removeClass("aok-hidden"))},c=function(b){if(d.dealCustomerState===d.DealStates.INCART)return l();p(b);a.$(d.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-warning");a.$(d.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-warning");a.$("#attachSiAddCoverage-ld").addClass("aok-hidden")},m=function(){p(d.Selectors.ATTACH_LD_ERROR);a.$(d.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-error");
a.$(d.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-error")},p=function(b){b=a.$(b);b.hasClass("aok-hidden")&&(a.$(d.Selectors.ATTACH_LD_STATUS).find("\x3e div:not(.aok-hidden)").each(function(){a.$(this).addClass("aok-hidden")}),b.removeClass("aok-hidden"))},e=function(){a.$(document).ajaxSuccess(function(a,c,e){e.url.match(d.Endpoints.LD_STATUS)&&(a=JSON.parse(c.responseText),a.dealStatus&&a.dealStatus[d.dealId]&&((a=a.dealStatus[d.dealId].dealItemStatus[d.baseAsin])?
(d.dealItemState=a.itemState,d.dealCustomerState=a.customerState,d.dealMsToCustomerStateExpiry=a.msToCustomerStateExpiry):b.logCount(b.CSM_METRICS.ATTACH_BASE_LD_DEAL_STATUS_ERROR)))})};return d});"use strict";q.when("A","attach-common","attach-lightning-deals-common","attach-desktop-side-sheet","attach-logging").register("attach-lightning-deals-desktop",function(a,b,d,l,c){var m={},p=/(\{0})/,e=function(){d.initializeAttachLD();2===a.$(d.Selectors.ATTACH_LD_ALERT).find(".a-icon").length&&a.$(d.Selectors.ATTACH_LD_ALERT+
" .a-icon").first().remove();a.$("#attach-ld-close-button").hasClass("close-button")||a.$("#attach-ld-close-button").addClass("close-button").click(l.next);if(d.hasLightningDealTimer()&&!d.attachDealTimerExists()){var b=a.$("#attach-base-ld-timer").val();b&&b.length?b.split(p).forEach(function(b){b="{0}"===b?d.Constants.ATTACH_LD_TIME:"\x3cp\x3e"+b+"\x3c/p\x3e";a.$("#attach-ld-success .attach-ld-info").append(b)}):(c.logCount(c.CSM_METRICS.DSS_BASE_LD_MISSING_TIMER),c.logError({message:"Attach desktop base LD missing timer translation. Base ASIN\x3d"+
a.$("#attach-baseAsin").val()}))}a.$(d.Selectors.ATTACH_LD_CONTAINER).removeClass("aok-hidden");a.on(d.Events.DSS_CLOSE,g);d.updateLDUX()},g=function(){a.off(d.Events.DSS_CLOSE,g);b.selectedBaseLightningDeal=!1;a.$("#attach-accessory-pane").height("");a.$(d.Selectors.ATTACH_LD_CONTAINER).addClass("aok-hidden");a.$(".attach-primary-atc-confirm-box").removeClass("aok-hidden");a.$("#attachSiAddCoverage").removeClass("aok-hidden")};m.handleDealClaim=function(){c.logCount(c.CSM_METRICS.DSS_BASE_LD_ATC_CLICK);
d.dealCustomerState=d.DealStates.INCART;d.dealItemState=d.DealStates.AVAILABLE;d.dealMsToCustomerStateExpiry=y;e()};return m});"use strict";q.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,b,d){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(d("session-id"))});"use strict";q.when("A","3p-promise","attach.utilities.price-formatter").register("attach.amazonapi.client",function(a,b,d){var l={buildRequestUrl:function(b){var c=a.$("#attach-aapi-ajax-endpoint").val()+
"/"+b.apiPath,d=[];if(b.additionalParameters)for(var e in b.additionalParameters)b.additionalParameters.hasOwnProperty(e)&&d.push(e+"\x3d"+encodeURIComponent(b.additionalParameters[e]));d.length&&(c+="?"+d.join("\x26"));return c},buildAcceptHeader:function(a){var b=["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&b.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');return b.join("; ")},buildRequestHeaders:function(b){var c=a.$("#attach-aapi-ajax-csrf-token").val();
c={Accept:l.buildAcceptHeader(b),"Accept-Language":a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"),"x-cc-currency-of-preference":a.$("#attach-currency-of-preference").val(),"x-api-csrf-token":c};b.requestType&&(c["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+b.requestType+'"');return c},makeRequest:function(c){return new b(function(b,d){var e=l.buildRequestUrl(c),g=l.buildRequestHeaders(c),h=c.data?JSON.stringify(c.data):y;return a.$.ajax({type:c.method,
url:e,headers:g,data:h,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){b(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(u){b.data=a.responseText}d(b)}})})},isException:function(a){return a&&"undefined"!==typeof a.statusCode&&"undefined"!==typeof a.xhr},formatMoney:function(b){return b.displayString?b.displayString:b.convertedFrom&&b.currencyCode===b.convertedFrom.currencyCode&&b.convertedFrom.displayString?b.convertedFrom.displayString:
d.formatPrice(Number(b.amount),b.currencyCode||a.$("#attach-currency-of-preference").val(),a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"))}};return l});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.cart.add-items",function(a){var b={RESPONSE_TYPE_SUCCESS:"cart.add-items/v1",RESPONSE_TYPE_INCOMPLETE_ADD:"add-items.incomplete-add.error/v1"},d=function(a){return a},l=function(a){if(a.data&&"add-items.incomplete-add.error/v1"===a.data.type)return a.data;
throw a;};b.addItems=function(b,m){b={apiPath:"cart/carts/retail/items",requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:b},additionalParameters:{}};m&&(b.additionalParameters.ref=m);return a.makeRequest(b).then(d).catch(l)};return b});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.cart.items",function(a){return{items:function(b,d){b={apiPath:"cart/items",requestType:"cart.items.request/v1",responseType:"cart.items/v1",method:"GET",
additionalParameters:b};d&&(b.additionalParameters.ref=d);return a.makeRequest(b)}}});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.cart.summary",function(a){var b={CART_TYPE_RETAIL:"RETAIL",EMPTY_CART_RETAIL:{itemCount:0,lastModified:null,cartType:"RETAIL",subtotal:{amount:0}}},d=function(a){return a};b.get=function(b){var c={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};b&&(c.additionalParameters.cartTypes=b);return a.makeRequest(c).then(d)};
return b});"use strict";q.when("A").register("attach.amazonapi.products.media-builder",function(a){var b={},d,l,c,m,p,e,g,h;b.init=function(a){d=a;p=m=c=l=y;e=d.width;g=d.height;h=[];d.styleCode&&h.push(encodeURIComponent(d.styleCode));return b};b.cdn=function a(a){l=a;return b};b.withNameAndOU=function(a,d,e){c=a.startsWith("/")?a.substring(1):a;m=1===d.length?"0"+d:d;p=e;return b};b.crop=function(a,c,d,l){e=Math.round(Math.min(d,e-a));g=Math.round(Math.min(l,g-c));h.push("_CR"+[a,c,d,l].join());
return b};b.autoCrop=function(){h.push("_AC");return b};b.blur=function(a){h.push("_BL"+a);return b};b.scaleToRectangle=function(a,c){e=a;g=c;h.push("_SR"+a+","+c);return b};b.scaleToSquare=function(a){g=e=a;h.push("_SS"+a);return b};b.scaleToWidth=function(a){e>a&&(g=Math.round(a*g/e),e=Math.round(a));h.push("_SX"+a);return b};b.scaleToHeight=function(a){g>a&&(e=Math.round(a*e/g),g=Math.round(a));h.push("_SY"+a);return b};b.scaleToLongest=function(a){e>g?a<e&&(g=Math.round(a*g/e),e=Math.round(a)):
a<g&&(e=Math.round(a*e/g),g=Math.round(a));h.push("_SL"+a);return b};b.upscaleToHeight=function(a){e=0<g?Math.round(a*e/g):0;g=Math.round(a);this.rendering.push("_UY"+a);return b};b.upscaleToLongest=function(a){e>g?(g=Math.round(a*g/e),e=Math.round(a)):(e=0<g?Math.round(a*e/g):0,g=Math.round(a));this.rendering.push("_UL"+a);return b};b.upscaleToWidth=function(a){g=0<e?Math.round(a*g/e):0;e=Math.round(a);this.rendering.push("_UX"+a);return b};b.custom=function a(a){this.rendering.push(encodeURIComponent(a));
return b};b.build=function(){var a=[];a.push("https://");a.push(l?l:"m.media-amazon.com");c?a.push("/images/G/",m,"/",c,"._CB",p):a.push("/images/I/",d.physicalId,".");h.length&&a.push(h.join(""));(p||h.length)&&a.push("_");"."!==a[a.length-1]&&a.push(".");a.push(d.extension);return{url:a.join(""),width:e,height:g}};return b});"use strict";q.when("attach.amazonapi.client").register("attach.amazonapi.products.productV2",function(a){return{RESPONSE_TYPE_SUCCESS:"product/v2",RESOURCE_INCLUSIONS:{LINKS:"links(product.links/v2)",
PRODUCT_IMAGES:"productImages(product.product-images/v2)"},getProduct:function(b,d,l,c){b={apiPath:"products/"+b,requestType:"product.request/v2",responseType:"product/v2",method:"GET",resourceInclusions:d,additionalParameters:l||{}};c&&(b.additionalParameters.ref=c);return a.makeRequest(b)},getProductsBatch:function(b,d,l,c){b={apiPath:"products/"+b.join(","),requestType:"product.request/v2",responseType:"collection(product/v2)/v1",method:"GET",resourceInclusions:d,additionalParameters:l||{}};c&&
(b.additionalParameters.ref=c);return a.makeRequest(b)}}});"use strict";q.when("A").register("attach.events",function(a){return{Accessories:{ADD_TO_CART_STATUS:"attach:accessories:add-to-cart:status",SHOW:"attach:accessories:pane:show",HIDE:"attach:accessories:pane:hide",SEE_MORE_EXPAND:"attach:accessories:see-more:expand",SEE_MORE_COLLAPSE:"attach:accessories:see-more:collapse",CAROUSEL_PAGE_VIEW:"attach:accessories:carousel:page-view"},Cart:{ADD_BASE_HUC:"attach:add-base-to-cart",ADD_BASE_HUC_SUCCESS:"attach:add-base-to-cart:huc-success",
UPDATE_SUMMARY:"attach:cart:summary:update"}}});"use strict";q.register("attach.utilities.focus-management",function(){var a={attemptFocus:function(a){try{a.focus()}catch(d){}return a===document.activeElement},focusDescendant:function(b,d){if(b&&b.children)for(var l=0;l<b.children.length;l++){var c=b.children.item("last"===d?b.children.length-l-1:l);if(a.attemptFocus(c)||a.focusDescendant(c,d))return!0}return!1}};return a});"use strict";q.when("attach-logging").register("attach.utilities.price-formatter",
function(a){var b={};return{formatPrice:function(d,l,c){if(!t.Intl||!t.Intl.NumberFormat)return a.logCount("attach.utilities.price-formatter:UsedSimpleFormat"),l+" "+d.toFixed(2);a.logCount("attach.utilities.price-formatter:UsedIntlNumberFormat");var m=c+"/"+l;b.hasOwnProperty(m)||(b[m]=new Intl.NumberFormat(c,{style:"currency",currency:l}));return b[m].format(d)}}});"use strict";q.register("attach.utilities.strings",function(){var a=/\$\{(?:hash-get\s+)?([^\}]+)\}/g;return{substituteParameters:function(b,
d){return b.replace(a,function(a,b){return d&&d.hasOwnProperty(b)?d[b]:""})}}});"use strict";q.when("A","attach-logging","attach.amazonapi.cart.add-items").register("attach-atc-stay-ajax",function(a,b,d){function l(a){b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_AJAX_SUCCESS);q.when("nav.setCartCount").execute(function(b){b(a.entity.count.entity.items)})}return{atcStayPost:function(a,m){d.addItems([a.inputs],a.reftag).then(function(a){"add-items.incomplete-add.error/v1"===a.type&&b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE);
l(a);m&&m(a)}).catch(function(a){b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_AJAX_FAILURE);throw a;})}}})});